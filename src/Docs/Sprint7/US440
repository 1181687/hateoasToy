NUMBER: US440

DESCRIPTION: As a Power User or as a Room Owner, I want to have a list of the instants in which the temperature fell
below the comfort level in a given time interval and category (annex A.2 of EN 15251).

TEAM MEMBERS: Developer - Gabriela Xavier; QA - Diana Ferreira;

ACCEPTANCE CRITERIA:

General Criteria:
- Correct Sequence and Class Diagrams.
- JavaDoc documentation in both code and tests.
- JUnit conventions in code and tests. (eg. tests should be named like this:
                                        testNameOfTheMethod_conditionThatIsBeingTested_expectedResult).
- All code, comments and documentation are in proper English.

Specific Criteria:
- given -
- when -
- then:

- but -



Test Criteria:
- All unit tests with "Process finished with exit code 0" message.



Acceptance Tests:


// Measurements:

"There weren't enough measurements in that period, to calculate the instants." - If there are no readings in house area
or in the room
"There weren't enough measurements to calculate the instants during.. [specified period] - Not enough measurements


// Rooms

"There are no rooms in the house. Please create a new room." - room list is empty


// Dates

"That is not a valid period. Please try again. - When the choosen period is not valid (is inserted in the wrong format
yyyy-mm-dd)

"There are no dates without Comfort temperature level." - When the choosen period does not have dates with confort
temperature level



// Instants
"There are no instants out of the Comfort level."



//Temperature Sensors

"There are no temperature sensors available in the choosen room." - no temperature sensors for the choosen room








       "Choose one option:\n1- Get instants in which the temperature fell below the comfort level.\n 2- Get instants in which the temperature rose above the comfort level.\n 0- Exit.\n\n";
        int usOption = InputValidator.getIntRange(label100, 0, 2);

        if (usOption == 0) {
            return;
        }

        if (usOption == 1) {
            belowOrAbove = "below";
        }
        if (usOption == 2) {
            belowOrAbove = "above";
        }

        controller.setOption(usOption - 1);

        //category
        String label99 = "Choose the category of comfort temperature:\n 1- Category I.\n 2- Category II.\n  3- Category III.\n 0- Exit.\n\n";
        int categoryOption = InputValidator.getIntRange(label99, 0, 3);

        if (categoryOption == 0) {
            return;
        }



        //choose room
        String label0 = "Choose the room you want to get the instants:";
        int roomOption = InputValidator.getIntRange(label0, 1, roomDTOS.size()) - 1;
        if (roomOption == -1) {
            return;
        }



        do {
            flag = false;

            String label1 = "Please insert the first date of the period (yyyy-MM-dd):";
            startDate = InputValidator.getStringDate(label1);

            String label2 = "Please insert the second date of the period (yyyy-MM-dd):";
            endDate = InputValidator.getStringDate(label2);




ASSUMPTIONS:

* USER COMFORT - EN 15251:2006 provides recommendations for acceptable indoor temperatures for design of buildings without mechanical
cooling systems. The following formulas are given in annex A.2

- Category I:  Upper limit ti max = 0.33 to + 18.8 + 2
               Lower limit ti max = 0.33 to + 18.8 − 2

- Category II: Upper limit ti max = 0.33 to + 18.8 + 3
               Lower limit ti max = 0.33 to + 18.8 − 3

- Category III: Upper limit ti max = 0.33 to + 18.8 + 4
                Lower limit ti max = 0.33 to + 18.8 − 4

* When this user story is executed, the user (Power User or Room Owner) chooses the category he/she wishes to associate to
the room and the math regarding the US are made considering the chosen category.

* It is assumed that "to" in the formula to calculate the temperature is the outside temperature in the house area.

* The standard EN 15251:2006 provides the formula of a weighted average of several days, and, at the least, the number
of days may be one. At this time, it is not necessary to consider the average of several days, but only the average of
the day itself.

* When supplying the user stories, it was explained that in the Standard EN 15251:2006  document there is a section
with the necessary information for the application of EN 15251. This is of course a simplification, since the standard
is quite complex. In this sprint, it is only necessary to apply what is defined in the requirements. Further on, the
PO can understand that it wants to refine the mechanism.

* A time interval can encompass several days.

