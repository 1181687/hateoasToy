@startuml
skinparam sequenceMessageAlign center
skinparam sequence {
	ArrowColor Black
	ActorBorderColor DarkBlue
	LifeLineBorderColor black
	LifeLineBackgroundColor LightGrey

	ParticipantBorderColor Black
	ParticipantBackgroundColor LightGrey
	ParticipantFontStyle Bold

	ActorBackgroundColor DimGrey
	ActorFontColor DeepSkyBlue
	ActorFontStyle Bold
	ActorFontSize 17
	ActorFontName Aapex
}

activate AdminUser
actor AdminUser

AdminUser -> ":ImportReadings\nFromCSVReaderUI":1 - Import readings from a CSV file
activate ":ImportReadings\nFromCSVReaderUI"
":ImportReadings\nFromCSVReaderUI" -> ":ImportReadings\nFromCSVController": 1.1 - create()
activate ":ImportReadings\nFromCSVController"
":ImportReadings\nFromCSVController" -> ":GeographicalAreaList": 1.1.1 - create()
activate ":GeographicalAreaList"
":GeographicalAreaList" --> ":ImportReadings\nFromCSVController": 1.1.2 - geoAreaList
deactivate ":GeographicalAreaList"
":ImportReadings\nFromCSVController" -> ":SensorList": 1.2.1 - create()
activate ":SensorList"
":SensorList" --> ":ImportReadings\nFromCSVController": 1.2.2 - sensorList
deactivate ":SensorList"
":ImportReadings\nFromCSVController" --> ":ImportReadings\nFromCSVReaderUI": 1.2 - controller
deactivate ":ImportReadings\nFromCSVController"
":ImportReadings\nFromCSVReaderUI" -> ReadingMapper: 1.3 - newReadingDTO()
activate ReadingMapper

ReadingMapper -> ":ReadingDTO": 1.3.1 - create()
activate ":ReadingDTO"
":ReadingDTO" --> ReadingMapper: 1.3.2 - readingDTO
deactivate ":ReadingDTO"
ReadingMapper --> ":ImportReadings\nFromCSVReaderUI": 1.4 - readingDTO
deactivate ReadingMapper
":ImportReadings\nFromCSVReaderUI" --> AdminUser: 2 - Ask for the file name/path.
AdminUser -> ":ImportReadings\nFromCSVReaderUI": 3 - File name/path
":ImportReadings\nFromCSVReaderUI" -> ":ImportReadings\nFromCSVReaderUI": 3.1 - checkIfFileExistsAndCreateScanner(path)
loop readLinesAndImportReadings
":ImportReadings\nFromCSVReaderUI" -> CSVReader: 3.2 - parseLine(line)
activate CSVReader
CSVReader --> ":ImportReadings\nFromCSVReaderUI": 3.3 - sensorId, dateTime, value
deactivate CSVReader
":ImportReadings\nFromCSVReaderUI" -> ":ImportReadings\nFromCSVController": 3.4 - checkIfSensorExistsById(sensorId)
activate ":ImportReadings\nFromCSVController"
":ImportReadings\nFromCSVController" -> ":SensorList": 3.4.1 - checkIfSensorExistsById(sensorId)
activate ":SensorList"
":SensorList" --> ":ImportReadings\nFromCSVController": 3.4.2 - sensor
deactivate ":SensorList"
":ImportReadings\nFromCSVReaderUI" -> ":ImportReadings\nFromCSVReaderUI": 3.5 - checkDateTimeAndStoreIt(dateTime)
":ImportReadings\nFromCSVReaderUI" -> ":ImportReadings\nFromCSVReaderUI": 3.6 - checkValueAndStoreIt(value)
":ImportReadings\nFromCSVReaderUI" -> ":ReadingDTO": 3.7 - setDateTime(validDateTime)
":ImportReadings\nFromCSVReaderUI" -> ":ReadingDTO": 3.8 - setValue(validValue)
":ImportReadings\nFromCSVReaderUI" -> ":ImportReadings\nFromCSVController": 3.9 - addReadingToTheSensor(readingDTO)
":ImportReadings\nFromCSVController" -> ReadingMapper: 3.9.1 - mapToEntity(readingDTO)
activate ReadingMapper
ReadingMapper --> ":ImportReadings\nFromCSVController": 3.9.2 - reading
deactivate ReadingMapper
":ImportReadings\nFromCSVController" -> ":Sensor": 3.9.3 - addReadingToTheSensor(reading)
deactivate ":ImportReadings\nFromCSVController"
end loop
":ImportReadings\nFromCSVReaderUI" --> AdminUser: 4 - Give feedback




deactivate AdminUser

@enduml