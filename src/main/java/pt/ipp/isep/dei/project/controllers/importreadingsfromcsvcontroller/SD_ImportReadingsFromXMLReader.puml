@startuml
skinparam sequenceMessageAlign center
skinparam sequence {
	ArrowColor Black
	ActorBorderColor DarkBlue
	LifeLineBorderColor black
	LifeLineBackgroundColor LightGrey

	ParticipantBorderColor Black
	ParticipantBackgroundColor LightGrey
	ParticipantFontStyle Bold

	ActorBackgroundColor DimGrey
	ActorFontColor DeepSkyBlue
	ActorFontStyle Bold
	ActorFontSize 17
	ActorFontName Aapex
}

autonumber
actor AdminUser
activate AdminUser
actor AdminUser

AdminUser -> "ui : ImportReadings":1 - Import readings
activate "ui : ImportReadings"
"ui : ImportReadings" --> AdminUser: 2 - Ask for the file path
deactivate "ui : ImportReadings"
AdminUser -> "ui : ImportReadings": 3 - File path
activate "ui : ImportReadings"
"ui : ImportReadings" -> "ctrl : ImportReadings\nController": 3.1 - readFile(file, path)
activate "ctrl : ImportReadings\nController"
"ctrl : ImportReadings\nController" -> "reader : XMLReader": 3.1.1 - createReader(path)
activate "reader : XMLReader"
"reader : XMLReader" --> "ctrl : ImportReadings\nController": 3.1.2 - reader
deactivate "reader : XMLReader"
"ctrl : ImportReadings\nController" -> "reader : XMLReader": 3.1.3 - readFile(file)
activate "reader : XMLReader"
ref over "reader : XMLReader"
readFile
end
"reader : XMLReader" --> "ctrl : ImportReadings\nController": 3.1.4 - readingDTOs
deactivate "reader : XMLReader"
"ctrl : ImportReadings\nController" --> "ui : ImportReadings": 3.2 - readingDTOs
deactivate "ctrl : ImportReadings\nController"
"ui : ImportReadings" --> AdminUser: 4 - Ask for confirmation
deactivate "ui : ImportReadings"
AdminUser -> "ui : ImportReadings": 5 - Confirmation received
activate "ui : ImportReadings"
"ui : ImportReadings" -> "ctrl : ImportReadings\nController": 5.1 - importReadings()
activate "ctrl : ImportReadings\nController"
loop for each readingDTO
"ctrl : ImportReadings\nController" -> ReadingMapper: 5.1.1 - mapToEntity(readingDTO)
activate ReadingMapper
ReadingMapper --> "ctrl : ImportReadings\nController": 5.1.2 - reading
deactivate ReadingMapper
"ctrl : ImportReadings\nController" -> "sensors : SensorList": 5.1.3 - getSensorById(id)
activate "sensors : SensorList"
"sensors : SensorList" --> "sensor : Sensor": 5.1.3.1 - getSensor()
activate "sensor : Sensor"
"sensor : Sensor" --> "sensors : SensorList": 5.1.3.2 - sensor
deactivate "sensor : Sensor"
"sensors : SensorList" --> "ctrl : ImportReadings\nController": 5.1.4 - sensor
deactivate "sensors : SensorList"
"ctrl : ImportReadings\nController" -> "sensor : Sensor": 5.1.5 - addReading(reading)
activate "sensor : Sensor"
"sensor : Sensor" --> "ctrl : ImportReadings\nController": 5.1.6 - true
deactivate "sensor : Sensor"
end loop
ref over "ctrl : ImportReadings\nController"
updateRepository
end
"ctrl : ImportReadings\nController" --> "ui : ImportReadings": 5.2 - true
deactivate "ctrl : ImportReadings\nController"
"ui : ImportReadings" --> AdminUser: 6 - Give feedback
deactivate "ui : ImportReadings"

@enduml